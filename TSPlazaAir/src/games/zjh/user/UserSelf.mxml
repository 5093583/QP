<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"
		 xmlns:s="library://ns.adobe.com/flex/spark"
		 xmlns:mx="library://ns.adobe.com/flex/mx"
		 width="65" height="110"
		 creationComplete="group1_creationCompleteHandler(event)" fontFamily="宋体">
	<fx:Script>
		<![CDATA[
			import base.SkinClass;
			import base.StaticVars;
			
			import cx.assembly.head.HeadEmbed;
			import cx.client.logon.model.UserModel;
			import cx.ip.IPScannerNew;
			import cx.net.utils.NetWork;
			
			import gameAssets.zjh.ZjhSkinClass;
			
			import games.zjh.model.ZjhModel;
			
			import mx.events.FlexEvent;
			
			import t.cx.air.TScore;
			
			private var headMC:MovieClip;
			
			protected function group1_creationCompleteHandler(event:FlexEvent):void
			{
				//addHeadStatus();
			}
			
			private function addHeadStatus():void
			{
//				if(!ui_head.numChildren)
//				{
//					headMC = new ZjhSkinClass.head_statusbg() as MovieClip;
//					ui_head.addChild(headMC);
//				}
			}
			
			
			
			private var _userid : int;
			public function set userID(val : int) : void
			{
				_userid = val;
				IDTxt.text = "ID : " + val.toString();
//				IDTxt.text = UserModel._getInstance().selfInfo.szAccount;
				if(_userid == ZjhModel._getInstance().m_User.selfID)
				{
					SelfTxt.text = TScore.toStringEx(ZjhModel._getInstance().m_User.GetSelfData().UserScoreInfo.lScore);
					
					if(StaticVars.isTryPlayed)
						SelfTxt.text = TScore.toStringEx(StaticVars.tryPlayScore);
				}
			}
			public function get userID() : int
			{
				return _userid;
			}
			public function set IP(val : String) : void
			{
//				IPTxt.text = val;
//				var localIP : IPLocation = IPScanner._getInstance().Query(val);
//				IPTxt.text = localIP.country;
//				IPTxt.text = CxGetIpInfo(val);
				IPTxt.text = IPScannerNew._getInstance().getIpnew(val);
			}
			
			
			public function set JinBi(val : Number) : void
			{
				if(_userid == ZjhModel._getInstance().m_User.selfID)
				{
					SelfTxt.text = TScore.toStringEx(val);
					
					if(StaticVars.isTryPlayed)
						SelfTxt.text = TScore.toStringEx(StaticVars.tryPlayScore);
				}
			}
			
			private var _time : Timer;
			public function Offlie(timelen : int) : void
			{
				destroyTime();
				if(timelen > 0)
				{
					_time = new Timer(1000,timelen/1000);
					_time.addEventListener(TimerEvent.TIMER,onOfflieTime);
					_time.start();
					
//					setChildIndex(OffLineTxt,this.numChildren-1);
					setElementIndex(OffLineTxt,this.numChildren-1);
					OffLineTxt.text = '断线' + _time.repeatCount;
				}
			}
			private var _bitmap : Bitmap;
			public function set Face(index : uint) : void
			{
				if(index == 2)
					head.source = SkinClass.hall_head_female_small;
				else
					head.source = SkinClass.hall_head_male_small;
				
//				if(!headMC)
//					addHeadStatus();
//				headMC.gotoAndStop(2);
				
//				if(_bitmap != null)
//				{
//					if(this.contains(_bitmap))
//					{
//						this.removeChild(_bitmap);
//					}
//					_bitmap.bitmapData.dispose();
//					_bitmap = null;
//				}
//				_bitmap = HeadEmbed.EmbedHead(index);
//				if(_bitmap)
//					_bitmap.width = _bitmap.height = 76;
//				if(ZjhModel._getInstance().m_User._selfID == userID)
//				{
//					_bitmap.x = 15;
//					_bitmap.y = 40;
//					
//				}else {
//					_bitmap.x = 20;
//					_bitmap.y = 10;
//				}
//				this.addChild(_bitmap);
//				this.addElement(_bitmap);
//				if(_bitmap)
//					head.source = _bitmap;
			}
			
			private function onOfflieTime(e : TimerEvent) : void
			{
				OffLineTxt.text="断线" + (_time.repeatCount-_time.currentCount).toString();
				if(_time.repeatCount == _time.currentCount) { destroyTime(); }
			}
			private function destroyTime() : void
			{
				if(_time != null)
				{
					_time.reset();
					_time.removeEventListener(TimerEvent.TIMER,onOfflieTime);
					_time = null;
				}
				OffLineTxt.text = '';
			}
			public function Destroy() : void
			{
				destroyTime();
//				if(_bitmap)
//				{
//					if(this.contains(_bitmap)) { this.removeChild(_bitmap); }
//					_bitmap.bitmapData.dispose();
//					_bitmap = null;
//				}
//				this['IDTxt'] = null;
//				this['IPTxt'] = null;
//				this['OffLineTxt'] = null;
//				if(this.hasOwnProperty('SelfTxt'))
//				{
//					this['SelfTxt'] = null;
//				}
//				var dos : DisplayObject;
//				while(numChildren > 0)
//				{
//					dos = this.removeChildAt(0);
//					dos = null;
//				}
			}
			
			
			
			
		]]>
	</fx:Script>
	<fx:Declarations>
		<!-- 将非可视元素（例如服务、值对象）放在此处 -->
		<s:GlowFilter id="gf01" color="0x000000" strength="10" blurX="2" blurY="2"/>
	</fx:Declarations>
<!--	<s:Image x="0" y="0" source="{ZjhSkinClass.user_bg0}"/>-->
	<!--
	<s:Group x="15" y="8" id="head_mask">
		<s:Ellipse width="66" height="66">
			<s:fill>
				<s:SolidColor color="0xcccccc"/>
			</s:fill>
		</s:Ellipse>
	</s:Group>
	-->
	<!--<mx:UIComponent x="0" y="0" id="ui_head"/>-->
	
	<!--<s:Image x="11" y="10" id="head"/>-->
	
	<s:Image source="{ZjhSkinClass.user_head}" x="0" y="0"/>
	<s:Image x="6" y="6" id="head"/>
	
	<s:Label filters="{[gf01]}" id="IDTxt" horizontalCenter="0" y="70" color="#FFEE00"/>
	<s:Label filters="{[gf01]}" id="IPTxt" horizontalCenter="0" y="90" color="#FFEE00"/>
	
	<s:Label filters="{[gf01]}" id="SelfTxt" x="100" y="65" color="#F1E9C4"/>
	<s:Image x="70" y="60" source="{ZjhSkinClass.user_score}"/>
	
	<s:Label filters="{[gf01]}" color="0xFF0000" id="OffLineTxt" x="0" y="-25" width="80" fontSize="16" fontWeight="bold" textAlign="center"/>
	
	
</s:Group>
